<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Transaction - pypowervm documentation</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">pypowervm documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../.." class="nav-link">Welcome to MkDocs</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Pypowervm <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../" class="dropdown-item">Pypowervm</a>
</li>
                                    
<li>
    <a href="../../adapter/" class="dropdown-item">Adapter</a>
</li>
                                    
<li>
    <a href="../../const/" class="dropdown-item">Const</a>
</li>
                                    
<li>
    <a href="../../entities/" class="dropdown-item">Entities</a>
</li>
                                    
<li>
    <a href="../../exceptions/" class="dropdown-item">Exceptions</a>
</li>
                                    
<li>
    <a href="../../i18n/" class="dropdown-item">I18n</a>
</li>
                                    
<li>
    <a href="../../log/" class="dropdown-item">Log</a>
</li>
                                    
<li>
    <a href="../../traits/" class="dropdown-item">Traits</a>
</li>
                                    
<li>
    <a href="../../util/" class="dropdown-item">Util</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Hacking</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../hacking/" class="dropdown-item">Hacking</a>
</li>
            
<li>
    <a href="../../hacking/checks/" class="dropdown-item">Checks</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Helpers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../helpers/" class="dropdown-item">Helpers</a>
</li>
            
<li>
    <a href="../../helpers/log_helper/" class="dropdown-item">Log Helper</a>
</li>
            
<li>
    <a href="../../helpers/sample_helper/" class="dropdown-item">Sample Helper</a>
</li>
            
<li>
    <a href="../../helpers/vios_busy/" class="dropdown-item">Vios Busy</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Tasks</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../tasks/" class="dropdown-item">Tasks</a>
</li>
            
<li>
    <a href="../../tasks/client_storage/" class="dropdown-item">Client Storage</a>
</li>
            
<li>
    <a href="../../tasks/cluster_ssp/" class="dropdown-item">Cluster Ssp</a>
</li>
            
<li>
    <a href="../../tasks/cna/" class="dropdown-item">Cna</a>
</li>
            
<li>
    <a href="../../tasks/ibmi/" class="dropdown-item">Ibmi</a>
</li>
            
<li>
    <a href="../../tasks/management_console/" class="dropdown-item">Management Console</a>
</li>
            
<li>
    <a href="../../tasks/master_mode/" class="dropdown-item">MasterMode</a>
</li>
            
<li>
    <a href="../../tasks/memory/" class="dropdown-item">Memory</a>
</li>
            
<li>
    <a href="../../tasks/migration/" class="dropdown-item">Migration</a>
</li>
            
<li>
    <a href="../../tasks/network_bridger/" class="dropdown-item">NetworkBridger</a>
</li>
            
<li>
    <a href="../../tasks/partition/" class="dropdown-item">Partition</a>
</li>
            
<li>
    <a href="../../tasks/power/" class="dropdown-item">Power</a>
</li>
            
<li>
    <a href="../../tasks/power_opts/" class="dropdown-item">Power Opts</a>
</li>
            
<li>
    <a href="../../tasks/scsi_mapper/" class="dropdown-item">Scsi Mapper</a>
</li>
            
<li>
    <a href="../../tasks/slot_map/" class="dropdown-item">Slot Map</a>
</li>
            
<li>
    <a href="../../tasks/sriov/" class="dropdown-item">Sriov</a>
</li>
            
<li>
    <a href="../../tasks/storage/" class="dropdown-item">Storage</a>
</li>
            
<li>
    <a href="../../tasks/vfc_mapper/" class="dropdown-item">Vfc Mapper</a>
</li>
            
<li>
    <a href="../../tasks/vopt/" class="dropdown-item">Vopt</a>
</li>
            
<li>
    <a href="../../tasks/vterm/" class="dropdown-item">Vterm</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Hdisk</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../tasks/hdisk/" class="dropdown-item">Hdisk</a>
</li>
            
<li>
    <a href="../../tasks/hdisk/_fc/" class="dropdown-item">Fc</a>
</li>
            
<li>
    <a href="../../tasks/hdisk/_iscsi/" class="dropdown-item">Iscsi</a>
</li>
            
<li>
    <a href="../../tasks/hdisk/_rbd/" class="dropdown-item">Rbd</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Monitor</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../tasks/monitor/" class="dropdown-item">Monitor</a>
</li>
            
<li>
    <a href="../../tasks/monitor/host_cpu/" class="dropdown-item">Host Cpu</a>
</li>
            
<li>
    <a href="../../tasks/monitor/lpar/" class="dropdown-item">Lpar</a>
</li>
            
<li>
    <a href="../../tasks/monitor/util/" class="dropdown-item">Util</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Tests</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../tests/" class="dropdown-item">Tests</a>
</li>
            
<li>
    <a href="../../tests/lib/" class="dropdown-item">Lib</a>
</li>
            
<li>
    <a href="../../tests/test_adapter/" class="dropdown-item">TestAdapter</a>
</li>
            
<li>
    <a href="../../tests/test_exceptions/" class="dropdown-item">TestExceptions</a>
</li>
            
<li>
    <a href="../../tests/test_fixtures/" class="dropdown-item">Test Fixtures</a>
</li>
            
<li>
    <a href="../../tests/test_helpers/" class="dropdown-item">TestHelpers</a>
</li>
            
<li>
    <a href="../../tests/test_i18n/" class="dropdown-item">Test I18n</a>
</li>
            
<li>
    <a href="../../tests/test_session/" class="dropdown-item">TestSession</a>
</li>
            
<li>
    <a href="../../tests/test_traits/" class="dropdown-item">TestTraits</a>
</li>
            
<li>
    <a href="../../tests/test_util/" class="dropdown-item">TestUtil</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Helpers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../tests/helpers/" class="dropdown-item">Helpers</a>
</li>
            
<li>
    <a href="../../tests/helpers/test_loghelper/" class="dropdown-item">TestLogHelper</a>
</li>
            
<li>
    <a href="../../tests/helpers/test_sample/" class="dropdown-item">Test Sample</a>
</li>
            
<li>
    <a href="../../tests/helpers/test_vios_busy/" class="dropdown-item">Test Vios Busy</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Tasks</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../tests/tasks/" class="dropdown-item">Tasks</a>
</li>
            
<li>
    <a href="../../tests/tasks/create_cluster/" class="dropdown-item">Create Cluster</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_client_storage/" class="dropdown-item">TestClientStorage</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_cluster_ssp/" class="dropdown-item">TestClusterSSP</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_cna/" class="dropdown-item">TestCNA</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_ibmi/" class="dropdown-item">TestIBMi</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_master_mode/" class="dropdown-item">TestMasterMode</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_memory/" class="dropdown-item">TestMemory</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_mgmtconsole/" class="dropdown-item">Test Mgmtconsole</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_migration/" class="dropdown-item">TestMigration</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_network_bridger/" class="dropdown-item">TestNetworkBridger</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_partition/" class="dropdown-item">TestPartition</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_power/" class="dropdown-item">TestPower</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_power_opts/" class="dropdown-item">TestPowerOpts</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_scsi_mapper/" class="dropdown-item">TestSCSIMapper</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_slot_map/" class="dropdown-item">Test Slot Map</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_sriov/" class="dropdown-item">TestSriov</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_storage/" class="dropdown-item">Test Storage</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_vfc_mapper/" class="dropdown-item">TestVFCMapper</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_vopt/" class="dropdown-item">TestVOpt</a>
</li>
            
<li>
    <a href="../../tests/tasks/test_vterm/" class="dropdown-item">TestVterm</a>
</li>
            
<li>
    <a href="../../tests/tasks/util/" class="dropdown-item">Util</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Hdisk</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../tests/tasks/hdisk/" class="dropdown-item">Hdisk</a>
</li>
            
<li>
    <a href="../../tests/tasks/hdisk/test_fc/" class="dropdown-item">TestFC</a>
</li>
            
<li>
    <a href="../../tests/tasks/hdisk/test_iscsi/" class="dropdown-item">TestIscsi</a>
</li>
            
<li>
    <a href="../../tests/tasks/hdisk/test_rbd/" class="dropdown-item">TestRbd</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Monitor</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../tests/tasks/monitor/" class="dropdown-item">Monitor</a>
</li>
            
<li>
    <a href="../../tests/tasks/monitor/test_host_cpu/" class="dropdown-item">Test Host Cpu</a>
</li>
            
<li>
    <a href="../../tests/tasks/monitor/test_monitor/" class="dropdown-item">Test Monitor</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Test utils</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../tests/test_utils/" class="dropdown-item">Test Utils</a>
</li>
            
<li>
    <a href="../../tests/test_utils/create_httpresp/" class="dropdown-item">Create Httpresp</a>
</li>
            
<li>
    <a href="../../tests/test_utils/pvmhttp/" class="dropdown-item">Pvmhttp</a>
</li>
            
<li>
    <a href="../../tests/test_utils/refresh_httpresp/" class="dropdown-item">Refresh Httpresp</a>
</li>
            
<li>
    <a href="../../tests/test_utils/test_wrapper_abc/" class="dropdown-item">Test Wrapper Abc</a>
</li>
            
<li>
    <a href="../../tests/test_utils/xml_sections/" class="dropdown-item">Xml Sections</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Utils</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../tests/utils/" class="dropdown-item">Utils</a>
</li>
            
<li>
    <a href="../../tests/utils/test_lpar_bldr/" class="dropdown-item">Test Lpar Bldr</a>
</li>
            
<li>
    <a href="../../tests/utils/test_retry/" class="dropdown-item">TestRetry</a>
</li>
            
<li>
    <a href="../../tests/utils/test_transaction/" class="dropdown-item">Test Transaction</a>
</li>
            
<li>
    <a href="../../tests/utils/test_uuid/" class="dropdown-item">TestUUID</a>
</li>
            
<li>
    <a href="../../tests/utils/test_validation/" class="dropdown-item">Test Validation</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Wrappers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../tests/wrappers/" class="dropdown-item">Wrappers</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_cdata/" class="dropdown-item">TestCDATA</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_cluster/" class="dropdown-item">TestCluster</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_enterprise_pool/" class="dropdown-item">Test Enterprise Pool</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_entry/" class="dropdown-item">Test Entry</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_event/" class="dropdown-item">TestEvent</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_http_error/" class="dropdown-item">TestHttpError</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_iocard/" class="dropdown-item">Test Iocard</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_job/" class="dropdown-item">Test Job</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_logical_partition/" class="dropdown-item">TestLogicalPartition</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_managed_system/" class="dropdown-item">Test Managed System</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_mgmt_console/" class="dropdown-item">Test Mgmt Console</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_monitor/" class="dropdown-item">Test Monitor</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_network/" class="dropdown-item">TestNetwork</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_search/" class="dropdown-item">TestSearch</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_shared_proc_pool/" class="dropdown-item">Test Shared Proc Pool</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_storage/" class="dropdown-item">Test Storage</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_vios_file/" class="dropdown-item">TestVIOSFile</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_virtual_io_server/" class="dropdown-item">Test Virtual Io Server</a>
</li>
            
<li>
    <a href="../../tests/wrappers/test_wrapper_properties/" class="dropdown-item">Test Wrapper Properties</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Pcm</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../tests/wrappers/pcm/" class="dropdown-item">Pcm</a>
</li>
            
<li>
    <a href="../../tests/wrappers/pcm/test_lpar/" class="dropdown-item">Test Lpar</a>
</li>
            
<li>
    <a href="../../tests/wrappers/pcm/test_phyp/" class="dropdown-item">Test Phyp</a>
</li>
            
<li>
    <a href="../../tests/wrappers/pcm/test_vios/" class="dropdown-item">Test Vios</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Utils</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../" class="dropdown-item">Utils</a>
</li>
            
<li>
    <a href="../lpar_builder/" class="dropdown-item">LPARBuilder</a>
</li>
            
<li>
    <a href="../retry/" class="dropdown-item">Retry</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Transaction</a>
</li>
            
<li>
    <a href="../uuid/" class="dropdown-item">Uuid</a>
</li>
            
<li>
    <a href="../validation/" class="dropdown-item">Validation</a>
</li>
            
<li>
    <a href="../wrappers/" class="dropdown-item">Wrappers</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Wrappers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../wrappers/" class="dropdown-item">Wrappers</a>
</li>
            
<li>
    <a href="../../wrappers/base_partition/" class="dropdown-item">BasePartition</a>
</li>
            
<li>
    <a href="../../wrappers/cluster/" class="dropdown-item">Cluster</a>
</li>
            
<li>
    <a href="../../wrappers/enterprise_pool/" class="dropdown-item">Enterprise Pool</a>
</li>
            
<li>
    <a href="../../wrappers/entry_wrapper/" class="dropdown-item">EntryWrapper</a>
</li>
            
<li>
    <a href="../../wrappers/event/" class="dropdown-item">Event</a>
</li>
            
<li>
    <a href="../../wrappers/http_error/" class="dropdown-item">HttpError</a>
</li>
            
<li>
    <a href="../../wrappers/iocard/" class="dropdown-item">Iocard</a>
</li>
            
<li>
    <a href="../../wrappers/job/" class="dropdown-item">Job</a>
</li>
            
<li>
    <a href="../../wrappers/logical_partition/" class="dropdown-item">Logical Partition</a>
</li>
            
<li>
    <a href="../../wrappers/managed_system/" class="dropdown-item">Managed System</a>
</li>
            
<li>
    <a href="../../wrappers/management_console/" class="dropdown-item">ManagementConsole</a>
</li>
            
<li>
    <a href="../../wrappers/monitor/" class="dropdown-item">Monitor</a>
</li>
            
<li>
    <a href="../../wrappers/mtms/" class="dropdown-item">MTMS</a>
</li>
            
<li>
    <a href="../../wrappers/network/" class="dropdown-item">Network</a>
</li>
            
<li>
    <a href="../../wrappers/pmem/" class="dropdown-item">Pmem</a>
</li>
            
<li>
    <a href="../../wrappers/shared_proc_pool/" class="dropdown-item">SharedProcPool</a>
</li>
            
<li>
    <a href="../../wrappers/storage/" class="dropdown-item">Storage</a>
</li>
            
<li>
    <a href="../../wrappers/vios_file/" class="dropdown-item">Vios File</a>
</li>
            
<li>
    <a href="../../wrappers/virtual_io_server/" class="dropdown-item">Virtual Io Server</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Pcm</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../wrappers/pcm/" class="dropdown-item">Pcm</a>
</li>
            
<li>
    <a href="../../wrappers/pcm/lpar/" class="dropdown-item">Lpar</a>
</li>
            
<li>
    <a href="../../wrappers/pcm/phyp/" class="dropdown-item">Phyp</a>
</li>
            
<li>
    <a href="../../wrappers/pcm/vios/" class="dropdown-item">Vios</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../retry/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../uuid/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#transaction" class="nav-link">Transaction</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#contextthreadpoolexecutor" class="nav-link">ContextThreadPoolExecutor</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#feedtask" class="nav-link">FeedTask</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#subtask" class="nav-link">Subtask</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#wrappertask" class="nav-link">WrapperTask</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#entry_transaction" class="nav-link">entry_transaction</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="transaction">Transaction</h1>
<p><a href="../../README.md#pypowervm-index">Pypowervm Index</a> /
<a href="../../#pypowervm">Pypowervm</a> /
<a href="../#utils">Utils</a> /
Transaction</p>
<blockquote>
<p>Auto-generated documentation for <a href="../../../pypowervm/utils/transaction.py">pypowervm.utils.transaction</a> module.</p>
</blockquote>
<ul>
<li><a href="#transaction">Transaction</a></li>
<li><a href="#contextthreadpoolexecutor">ContextThreadPoolExecutor</a><ul>
<li><a href="#contextthreadpoolexecutor()submit">ContextThreadPoolExecutor().submit</a></li>
</ul>
</li>
<li><a href="#feedtask">FeedTask</a><ul>
<li><a href="#feedtask()add_functor_subtask">FeedTask().add_functor_subtask</a></li>
<li><a href="#feedtask()add_post_execute">FeedTask().add_post_execute</a></li>
<li><a href="#feedtask()add_subtask">FeedTask().add_subtask</a></li>
<li><a href="#feedtask()execute">FeedTask().execute</a></li>
<li><a href="#feedtask()feed">FeedTask().feed</a></li>
<li><a href="#feedtask()get_wrapper">FeedTask().get_wrapper</a></li>
<li><a href="#feedtask()wrapper_tasks">FeedTask().wrapper_tasks</a></li>
</ul>
</li>
<li><a href="#subtask">Subtask</a><ul>
<li><a href="#subtask()execute">Subtask().execute</a></li>
</ul>
</li>
<li><a href="#wrappertask">WrapperTask</a><ul>
<li><a href="#wrappertask()add_functor_subtask">WrapperTask().add_functor_subtask</a></li>
<li><a href="#wrappertask()add_subtask">WrapperTask().add_subtask</a></li>
<li><a href="#wrappertask()execute">WrapperTask().execute</a></li>
<li><a href="#wrappertask()subtasks">WrapperTask().subtasks</a></li>
<li><a href="#wrappertask()wrapper">WrapperTask().wrapper</a></li>
</ul>
</li>
<li><a href="#entry_transaction">entry_transaction</a></li>
</ul>
<h2 id="contextthreadpoolexecutor">ContextThreadPoolExecutor</h2>
<p><a href="../../../pypowervm/utils/transaction.py#L482">Show source in transaction.py:482</a></p>
<h4 id="signature">Signature</h4>
<pre><code class="language-python">class ContextThreadPoolExecutor(th.ThreadPoolExecutor):
    ...
</code></pre>
<h3 id="contextthreadpoolexecutorsubmit">ContextThreadPoolExecutor().submit</h3>
<p><a href="../../../pypowervm/utils/transaction.py#L483">Show source in transaction.py:483</a></p>
<h4 id="signature_1">Signature</h4>
<pre><code class="language-python">def submit(self, fn, *args, **kwargs):
    ...
</code></pre>
<h2 id="feedtask">FeedTask</h2>
<p><a href="../../../pypowervm/utils/transaction.py#L500">Show source in transaction.py:500</a></p>
<p>Invokes WrapperTasks in parallel over each EntryWrapper in a feed.</p>
<p>Usage
  Creation:
    # Preferred
    fm = FeedTask('lpar_frobnicate', LPAR.getter(adapter))
  or
    # Non-preferred.  See 'Greedy Methods' warning below
    feed = LPAR.wrap(adapter.read(LPAR.schema_type, ...))
    fm = FeedTask('lpar_frobnicate', feed)</p>
<p>Adding Subtasks:
  # Preferred
  fm.add_subtask(FrobnicateLpar(foo, bar))
  fm.add_functor_subtask(frobnify, abc, xyz)
and/or
  # Non-preferred.  See 'Greedy Methods' warning below
  for uuid, txn in fm.wrapper_tasks.items():
      if meets_criteria(txn.wrapper, uuid):
          txn.add_subtask(FrobnicateLpar(baz, blah))
  fm.wrapper_tasks[known_uuid].add_subtask(FrobnicateLpar(baz, blah)</p>
<p>Execution/TaskFlow management:
  main_flow.add(fm)
  ...
  taskflow.engines.run(main_flow)</p>
<p>Warning: Greedy Methods
This implementation makes every effort to defer the feed GET as long as
possible.  The more time passes between the GET and the execution of the
WrapperTasks, the more likely it is that some out-of-band change will have
modified one of the objects represented in the feed. This will cause an
etag mismatch on that WrapperTask's update (POST), resulting in that
WrapperTask being redriven, which costs an extra GET+POST to the REST
server.</p>
<p>Consumers of this class can thwart these efforts by:
a) Initializing the FeedTask with an already-retrieved feed instead of a
   FeedGetter; or
b) Using any of the following methods/properties prior to execution.  All
   of these will trigger a GET of the feed if not already fetched:</p>
<p>.wrapper_tasks
.get_wrapper(uuid)
.feed</p>
<p>The cost is incurred only the first time one of these is used.  If your
workflow requires calling one of these early, it is not necessary to
avoid them subsequently.</p>
<h4 id="signature_2">Signature</h4>
<pre><code class="language-python">class FeedTask(tf_task.Task):
    def __init__(self, name, feed_or_getter, max_workers=10, update_timeout=-1):
        ...
</code></pre>
<h3 id="feedtaskadd_functor_subtask">FeedTask().add_functor_subtask</h3>
<p><a href="../../../pypowervm/utils/transaction.py#L659">Show source in transaction.py:659</a></p>
<p>Add a functor Subtask to <em>all</em> WrapperTasks in this FeedTask.</p>
<p>To add Subtasks to individual WrapperTasks, iterate over the result of
the 'wrapper_tasks' property.</p>
<p>Specification is the same as for WrapperTask.add_functor_subtask.</p>
<h4 id="signature_3">Signature</h4>
<pre><code class="language-python">def add_functor_subtask(self, func, *args, **kwargs):
    ...
</code></pre>
<h3 id="feedtaskadd_post_execute">FeedTask().add_post_execute</h3>
<p><a href="../../../pypowervm/utils/transaction.py#L669">Show source in transaction.py:669</a></p>
<p>Add some number of TaskFlow Tasks to run after the WrapperTasks.</p>
<p>Such Tasks may 'require' a parameter called wrapper_task_rets, which
will be a dict of the form:
{uuid: {
    'wrapper': wrapper,
    label1: return_value,
    label2: return_value,
    ...
    labelN: return_value}}
...where:
uuid is the UUID of the WrapperTask's wrapper.
wrapper is the WrapperTask's wrapper in its final (possibly-updated)
        form.
labelN: return_value are the return values from Subtasks using the
        'provides' mechanism.  Each label corresponds to the name
        given by the Subtask's 'provides' argument.</p>
<h4 id="arguments">Arguments</h4>
<ul>
<li><code>tasks</code> - Some number of TaskFlow Tasks (or Flows) to be executed
              linearly after the parallel WrapperTasks have completed.</li>
</ul>
<h4 id="signature_4">Signature</h4>
<pre><code class="language-python">def add_post_execute(self, *tasks):
    ...
</code></pre>
<h3 id="feedtaskadd_subtask">FeedTask().add_subtask</h3>
<p><a href="../../../pypowervm/utils/transaction.py#L642">Show source in transaction.py:642</a></p>
<p>Add a Subtask to <em>all</em> WrapperTasks in this FeedTask.</p>
<p>To add Subtasks to individual WrapperTasks, iterate over the result of
the 'wrapper_tasks' property.</p>
<p>Specification is the same as for WrapperTask.add_subtask.</p>
<h4 id="signature_5">Signature</h4>
<pre><code class="language-python">def add_subtask(self, task):
    ...
</code></pre>
<h3 id="feedtaskexecute">FeedTask().execute</h3>
<p><a href="../../../pypowervm/utils/transaction.py#L750">Show source in transaction.py:750</a></p>
<p>Run this FeedTask's WrapperTasks in parallel TaskFlow engine.</p>
<h4 id="returns">Returns</h4>
<p>Dictionary of results provided by subtasks and post-execs.
         The shape of this dict is as normally expected from TaskFlow,
         noting that the WrapperTasks are executed in a subflow and
         their results processed into wrapper_task_rets.  For example:
    {'wrapper_task_rets': { uuid: {...}, uuid: {...}, ...}
     'post_exec_x_provides': ...,
     'post_exec_y_provides': ...,
     ...}</p>
<h4 id="signature_6">Signature</h4>
<pre><code class="language-python">def execute(self):
    ...
</code></pre>
<h3 id="feedtaskfeed">FeedTask().feed</h3>
<p><a href="../../../pypowervm/utils/transaction.py#L693">Show source in transaction.py:693</a></p>
<p>(Greedy) Returns this FeedTask's feed (list of wrappers).</p>
<p>The first access of this property triggers a GET of the feed if it has
not already been fetched, so use this only if you need the
EntryWrappers outside of the execution itself.</p>
<h4 id="signature_7">Signature</h4>
<pre><code class="language-python">@property
def feed(self):
    ...
</code></pre>
<h3 id="feedtaskget_wrapper">FeedTask().get_wrapper</h3>
<p><a href="../../../pypowervm/utils/transaction.py#L627">Show source in transaction.py:627</a></p>
<p>(Greedy) Returns the EntryWrapper associated with a particular UUID.</p>
<p>Note that this method triggers a GET of the feed if it has not already
been fetched, so use judiciously.</p>
<h4 id="arguments_1">Arguments</h4>
<ul>
<li><code>uuid</code> - The UUID of the wrapper of interest.</li>
</ul>
<h4 id="returns_1">Returns</h4>
<p>The EntryWrapper instance with the specified UUID.</p>
<h4 id="raises">Raises</h4>
<ul>
<li><code>KeyError</code> -  If there's no WrapperTask for a wrapper with the
                 specified UUID.</li>
</ul>
<h4 id="signature_8">Signature</h4>
<pre><code class="language-python">def get_wrapper(self, uuid):
    ...
</code></pre>
<h3 id="feedtaskwrapper_tasks">FeedTask().wrapper_tasks</h3>
<p><a href="../../../pypowervm/utils/transaction.py#L603">Show source in transaction.py:603</a></p>
<p>(Greedy) Dictionary of {uuid: WrapperTask} for all wrappers.</p>
<p>The first access of this property triggers a GET of the feed if it has
not already been fetched, so use judiciously.</p>
<h4 id="signature_9">Signature</h4>
<pre><code class="language-python">@property
def wrapper_tasks(self):
    ...
</code></pre>
<h2 id="subtask">Subtask</h2>
<p><a href="../../../pypowervm/utils/transaction.py#L135">Show source in transaction.py:135</a></p>
<p>A single EntryWrapper modification to be performed within a WrapperTask.</p>
<p>A subclass performs its work by overriding the execute method.  That method
may or may not make changes to the EntryWrapper, which is its first
argument.  Its return value must indicate whether changes were made to the
wrapper: this is the trigger used by WrapperTask to determine whether to
POST the changes back to the REST server via update().  The return value is
saved by the surrounding WrapperTask if the 'provides' argument is used on
initialization.  This value can then be retrieved by subsequent Subtasks.</p>
<p>A Subtask should never update() or refresh() the wrapper.  That is handled
by the surrounding WrapperTask.</p>
<p>See WrapperTask for example usage.</p>
<h4 id="signature_10">Signature</h4>
<pre><code class="language-python">class Subtask(object):
    def __init__(self, *save_args, **save_kwargs):
        ...
</code></pre>
<h3 id="subtaskexecute">Subtask().execute</h3>
<p><a href="../../../pypowervm/utils/transaction.py#L177">Show source in transaction.py:177</a></p>
<p>Modify the EntryWrapper (must be overridden by the subclass).</p>
<p>The execute method has two responsibilities:
1) Performs the modification to the EntryWrapper which is passed as its
first argument.
2) Indicates whether any modifications were performed.</p>
<h4 id="examples">Examples</h4>
<p>def execute(thingy_wrapper, primary_widget, provided=None):
    update_needed = False
    if primary_widget not in thingy_wrapper.widgets:
        thingy_wrapper.set_primary_widget(primary_widget)
        update_needed = True
    # Was a widget list provided by a prior Subtask?
    if provided is not None:
        widget_list = provided.get('widget_list', [])
        for widget in widget_list:
            thingy_wrapper.widgets.append(widget)
            update_needed = True
    return update_needed</p>
<ul>
<li><code>:param</code> <em>args</em> - Positional arguments accepted by the execute method.  The
             first argument will always be the EntryWrapper.  Overrides
             may define their signatures using explicit parameter
             names.</li>
<li><code>:param</code> <em>kwargs</em> - Keyword arguments accepted by the execute method.
               Overrides may use explicit parameter names.</li>
<li><code>:param</code> <em>provided</em> - Dict of return values provided by Subtasks whose
                 execution preceded this one, and which used the
                 'provides' keyword argument to save their returns.
                 The keys of the dict are the 'provides' strings of the
                 prior Subtasks.</li>
<li><code>:return</code> - The return value must be a single value (this may be a list,
         but not a tuple) which evaluates to True or False.  Unless
         this Subtask was initialized with flag_update=False, any True
         value indicates that the wrapper was modified and should be
         POSTed back to the REST server via update().  Any False value
         (including None, [], {}, etc) indicates that this Subtask did
         not modify the wrapper.  (Note that it may still be POSTed if
         modified by other Subtasks in the same WrapperTask.)</li>
</ul>
<h4 id="signature_11">Signature</h4>
<pre><code class="language-python">@abc.abstractmethod
def execute(self, *args, **kwargs):
    ...
</code></pre>
<h2 id="wrappertask">WrapperTask</h2>
<p><a href="../../../pypowervm/utils/transaction.py#L266">Show source in transaction.py:266</a></p>
<p>An atomic modify-and-POST transaction Task over a single EntryWrapper.</p>
<p>The modifications should comprise some number of Subtask instances, added
to this WrapperTask via the add_subtask and/or add_functor_subtask methods.
These Subtasks should only modify the EntryWrapper, and should not POST
(.update()) it back to the REST Server.  The WrapperTask will decide
whether a POST is needed based on the returns from the Subtasks' execute
methods, and perform it if indicated.</p>
<p>The WrapperTask's execute method is encompassed by @entry_transaction,
meaning that:
1) The initial GET of the EntryWrapper may be deferred until after the lock
is acquired.
2) The execute method is locked on the UUID of the Entry in question.
3) If the final update (POST) fails due to etag mismatch, the EntryWrapper
is refetched and the entire transaction is redriven from the start.</p>
<p>Usage:
    class ModifyGizmos(Subtask):
        def execute(self, wrapper, gizmo_list, provides='first_gizmo'):
            update_needed = None
            if gizmo_list:
                wrapper.gizmos.append(gizmo_list)
                update_needed = gizmo_list[0]
            return update_needed</p>
<p>def add_widget(wrapper, widget, frob=False, provided=None):
      if provided is not None:
          widget.first_gizmo = provided.get('first_gizmo')
      wrapper.widgets.append(widget, frob)
      return len(wrapper.widgets)
  ...
  tx = WrapperTask("do_lpar_things", LPAR.getter(adapter, lpar_uuid))
or
  tx = WrapperTask("do_lpar_things", LPAR.getter(adapter, lpar_uuid),
                   subtasks=existing_wrapper_task.subtasks)
or
  # Not recommended - increased probability of retry
  wrapper = LPAR.wrap(adapter.read(LPAR.schema_type, lpar_uuid))
  tx = WrapperTask("do_lpar_things", wrapper)
  ...
  tx.add_subtask(ModifyGizmos([giz1, giz2]))
  ...
  logspec = [LOG.info, _LI("Added widget %(widget)s to LPAR %(lpar)s."),
             {'widget': widget.name, 'lpar': lpar_uuid}]
  tx.add_functor_subtask(add_widget, widget, provides='widget_count',
                         logspec=logspec)
  ...
  finalized_lpar = tx.execute()</p>
<h4 id="signature_12">Signature</h4>
<pre><code class="language-python">class WrapperTask(tf_task.Task):
    def __init__(
        self,
        name,
        wrapper_or_getter,
        subtasks=None,
        allow_empty=False,
        update_timeout=-1,
    ):
        ...
</code></pre>
<h3 id="wrappertaskadd_functor_subtask">WrapperTask().add_functor_subtask</h3>
<p><a href="../../../pypowervm/utils/transaction.py#L386">Show source in transaction.py:386</a></p>
<p>Create and add a Subtask for an already-defined method.</p>
<h4 id="arguments_2">Arguments</h4>
<ul>
<li><code>func</code> - A callable to be the core of the Subtask.  The contract
             for this method is identical to that of Subtask.execute -
             see that method's docstring for details.</li>
<li><code>args</code> - Positional arguments to be passed to the callable func
             (after the EntryWrapper parameter) when it is executed
             within the WrapperTask.</li>
<li><code>kwargs</code> - Keyword arguments to be passed to the callable func when
               it is executed within the WrapperTask.  May contain the
               following values, which are treated specially and NOT
               passed to the callable func:
       provides: See Subtask.<strong>init</strong>(provides).
       flag_update: See Subtask.<strong>init</strong>(flag_update).
       logspec: Iterable comprising a logging function, a format
                string, and zero or more arguments.  The log method is
                invoked before the func.  Example:</li>
</ul>
<p>logspec = [LOG.info, _LI("Deleting widget %(widget)s from "
                         "instance %(instance)s."),
           {'widget': widg, 'instance': instance.name}]
FunctorSubtask(..., logspec=logspec)</p>
<h4 id="returns_2">Returns</h4>
<p>self, for chaining convenience.</p>
<h4 id="signature_13">Signature</h4>
<pre><code class="language-python">def add_functor_subtask(self, func, *args, **kwargs):
    ...
</code></pre>
<h3 id="wrappertaskadd_subtask">WrapperTask().add_subtask</h3>
<p><a href="../../../pypowervm/utils/transaction.py#L365">Show source in transaction.py:365</a></p>
<p>Add a Subtask to this WrapperTask.</p>
<p>Subtasks will be invoked serially and synchronously in the order in
which they are added.</p>
<h4 id="arguments_3">Arguments</h4>
<ul>
<li><code>task</code> - Instance of a Subtask subclass containing the logic to
             invoke.</li>
</ul>
<h4 id="returns_3">Returns</h4>
<p>self, for chaining convenience.</p>
<h4 id="signature_14">Signature</h4>
<pre><code class="language-python">def add_subtask(self, task):
    ...
</code></pre>
<h3 id="wrappertaskexecute">WrapperTask().execute</h3>
<p><a href="../../../pypowervm/utils/transaction.py#L438">Show source in transaction.py:438</a></p>
<p>Invoke subtasks and update under @entry_transaction.</p>
<p>The flow is as follows:</p>
<p>1 Lock on wrapper UUID
2 GET wrapper if necessary
3 For each registered Subtask:
    - Invoke the Subtask to modify the wrapper
4 If update is necessary, POST the wrapper.  If POST fails with etag
  mismatch:
    - Refresh the wrapper
    - goto 2
5 Unlock</p>
<h4 id="signature_15">Signature</h4>
<pre><code class="language-python">def execute(self):
    ...
</code></pre>
<h3 id="wrappertasksubtasks">WrapperTask().subtasks</h3>
<p><a href="../../../pypowervm/utils/transaction.py#L429">Show source in transaction.py:429</a></p>
<p>Return the sequence of Subtasks registered with this WrapperTask.</p>
<p>This is returned as a tuple (not modifiable).  To add subtasks, use the
add_[functor_]subtask method.</p>
<h4 id="signature_16">Signature</h4>
<pre><code class="language-python">@property
def subtasks(self):
    ...
</code></pre>
<h3 id="wrappertaskwrapper">WrapperTask().wrapper</h3>
<p><a href="../../../pypowervm/utils/transaction.py#L413">Show source in transaction.py:413</a></p>
<p>(Fetches and) returns the EntryWrapper.</p>
<p>Use this only if you need the EntryWrapper outside of the WrapperTask's
execution itself.</p>
<p>Note that this guarantees a GET outside of lock, and should therefore
be used only if absolutely necessary.</p>
<h4 id="signature_17">Signature</h4>
<pre><code class="language-python">@property
def wrapper(self):
    ...
</code></pre>
<h2 id="entry_transaction">entry_transaction</h2>
<p><a href="../../../pypowervm/utils/transaction.py#L54">Show source in transaction.py:54</a></p>
<p>Decorator to facilitate transaction semantics on a PowerVM object.</p>
<p>Typically, a method thus decorated will make some set of changes to an
EntryWrapper and then perform one or more REST operations thereon.</p>
<p>The <em>consumer</em> of the decorated method may pass either an EntryWrapper or
an EntryWrapperGetter as the first argument.  The <em>developer</em> of the
decorated method is guaranteed that the first argument is an EntryWrapper.</p>
<p>This decorator provides three things:
1) The decorated method may be invoked with either an EntryWrapper or an
EntryWrapperGetter as its first argument.  However, within the body of the
method, that argument is guaranteed to be the appropriate EntryWrapper.
2) The decorated method is locked on the UUID of the PowerVM object on
which it operates (represented by its first argument).  Only one method
thus decorated can operate on that PowerVM object at one time.
3) If the decorated method fails due to an etag mismatch - indicating that
the wrapper was updated out-of-band between when it was retrieved and when
it was updated - the wrapper is refreshed and the entire method is
redriven.</p>
<p>Note: If the etag mistmatch occurs, the STEPPED_DELAY function is used
from the retry.py.  This provides a gradual increase in the delay (except
for the first retry - which is immediate).  A maximum number of 6 retries
will occur.</p>
<p>Example usage:</p>
<p>@entry_transaction
def add_gizmos_to_vios_wrapper(vios_wrapper, gizmos):
    vios_wrapper.gizmo_list.extend(gizmos)
    return vios_wrapper.update()</p>
<p>This method can then be invoked either as:</p>
<p>add_gizmos_to_vios_wrapper(existing_vios_wrapper, gizmos)</p>
<p>or as:</p>
<p>add_gizmos_to_vios_wrapper(pvm_vios.VIOS.getter(adapter, uuid), gizmos)</p>
<h4 id="signature_18">Signature</h4>
<pre><code class="language-python">def entry_transaction(func):
    ...
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
